<app-turnos-filter (aplicarFiltro)="onFiltrar($event)"></app-turnos-filter>
@if (error) {
<div class="bg-red-50 text-red-600 px-3 py-2 rounded mb-4 border border-red-200 text-sm">{{ error }}</div>
}
<div class="flex items-center gap-2 bg-yellow-50 border border-yellow-300 text-yellow-900 px-4 py-2 rounded mb-4">
  <svg xmlns='http://www.w3.org/2000/svg' class='h-5 w-5 text-yellow-500' fill='none' viewBox='0 0 24 24'
    stroke='currentColor'>
    <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2'
      d='M12 9v2m0 4h.01M12 5a7 7 0 100 14 7 7 0 000-14z' />
  </svg>
  <span class="font-semibold">Advertencia:</span> Solo se muestran turnos ocupados en este listado.
</div>
<h1 class="text-2xl font-bold">Turnos Ocupados</h1>
<div class="overflow-x-auto mt-4">
  <table class="min-w-full text-sm bg-white shadow-lg rounded-xl">
    <thead>
      <tr class="border-b border-gray-200 bg-gray-50">
        <th class="p-3 text-left font-semibold text-gray-700">Paciente</th>
        <th class="p-3 text-left font-semibold text-gray-700">Estudio</th>
        <th class="p-3 text-left font-semibold text-gray-700">Extractor</th>
        <th class="p-3 text-left font-semibold text-gray-700">Fecha/Hora</th>
        <th class="p-3 text-left font-semibold text-gray-700">Observaciones</th>
        <th class="p-3 text-left font-semibold text-gray-700">Estado</th>
      </tr>
    </thead>
    <tbody>
      @for (t of turnos; track t.id) {
      <tr class="border-b border-gray-100 hover:bg-blue-50 transition-colors">
        <td class="p-3">{{ t.paciente?.nombre_completo }}</td>
        <td class="p-3">{{ t.estudio?.nombre_estudio }}</td>
        <td class="p-3">{{ t.extractor?.nombre_completo }}</td>
        <td class="p-3">{{ t.fechaHora | date:'dd/MM/yyyy HH:mm' }}</td>
        <td class="p-3">{{ t.observaciones }}</td>
        <td class="p-3">
          <span class="inline-block px-2 py-1 rounded text-xs font-medium">
            {{ t.status }}
          </span>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>
